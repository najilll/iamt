{% extends 'web/base.html' %}
{% load static %}
{% block content %}
    <!-- Preloader Starts -->
    <div class="preloader" id="preloader">
        <div class="preloader-inner">
            <div class="spinner">
                <div class="bounce1"></div>
                <div class="bounce2"></div>
                <div class="bounce3"></div>
            </div>
        </div>
    </div>


    <!-- Breadcrumb Section -->
    <section class="breadcrumb-section text-center">
        <div class="container">
            <div class="row">
                <div class="col-12">
                    <h2>career </h2>
                    <ul>
                        <li><a href="index.html">home</a></li>
                        <li>/</li>
                        <li>contact</li>
                    </ul>
                </div>
            </div>
        </div>
    </section>

    <!-- Contact Section -->
    <section class="contact-section padding-80">
        <div class="container">
            <div class="row padding-top-30">
                <div class="col-lg-12">
                    <div class="contact-form">
                        <form method="POST" action="" enctype="multipart/form-data" class="ajax redirect" data-redirect="/">
                            {% csrf_token %}
                            {{ form.name }}
                            {{ form.email }}
                            {{ form.phone_number }}
                            {{ form.qualification }}
                            {{ form.resume }}
                            <button type="submit" class="template-btn">send message</button>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer Section -->

    <!-- Back Top -->
    <div class="back-to-top">
        <span><i class="fa fa-angle-up"></i></span>
    </div>

{% endblock %}
{% block js %}
<script>
    var isLoading = false;
$(document).on("submit", "form.ajax", function (e) {
    e.preventDefault();
    var $this = $(this),
        data = new FormData(this),
        action_url = $this.attr("action"),
        reset = $this.hasClass("reset"),
        reload = $this.hasClass("reload"),
        redirect = $this.hasClass("redirect"),
        redirect_url = $this.attr("data-redirect");

    if (!isLoading) {
        isLoading = true;
        $.ajax({
            url: action_url,
            type: "POST",
            data: data,
            cache: false,
            contentType: false,
            processData: false,
            dataType: "json",
            success: function (data) {
                var status = data.status;
                var title = data.title;
                var message = data.message;
                var pk = data.pk;
                if (status == "true") {
                    title ? (title = title) : (title = "Success");
                    Swal.fire({
                        title: title,
                        html: message,
                        icon: "success",
                    }).then(function () {
                        redirect && (window.location.href = redirect_url), reload && window.location.reload(), reset && window.location.reset();
                    });
                } else {
                    title ? (title = title) : (title = "An Error Occurred");
                    Swal.fire({
                        title: title,
                        html: message,
                        icon: "error",
                    });
                }
            },
            error: function (data) {
                var title = "An error occurred",
                    message = "something went wrong";
                Swal.fire({
                    title: title,
                    html: message,
                    icon: "error",
                });
            },
        }).then(function (response) {
            isLoading = false;
        });
    }
});
</script>
{% endblock js %}